(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{8782:function(e,t,r){Promise.resolve().then(r.bind(r,7364))},7364:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return em}});var s=r(7437),a=r(605),n=r(9376),i=r(2265),l=r(3723),o=r(2869),d=r(6070),c=r(6741),u=r(8575),f=r(3966),m=r(6840),x=r(1353),p=r(886),h=r(9114),v=r(420),j=r(6718),g=r(1599),b="Radio",[y,N]=(0,f.b)(b),[w,k]=y(b),q=i.forwardRef((e,t)=>{let{__scopeRadio:r,name:a,checked:n=!1,required:l,disabled:o,value:d="on",onCheck:f,form:x,...p}=e,[h,v]=i.useState(null),j=(0,u.e)(t,e=>v(e)),g=i.useRef(!1),b=!h||x||!!h.closest("form");return(0,s.jsxs)(w,{scope:r,checked:n,disabled:o,children:[(0,s.jsx)(m.WV.button,{type:"button",role:"radio","aria-checked":n,"data-state":C(n),"data-disabled":o?"":void 0,disabled:o,value:d,...p,ref:j,onClick:(0,c.M)(e.onClick,e=>{n||null==f||f(),b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),b&&(0,s.jsx)(S,{control:h,bubbles:!g.current,name:a,value:d,checked:n,required:l,disabled:o,form:x,style:{transform:"translateX(-100%)"}})]})});q.displayName=b;var R="RadioIndicator",z=i.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...n}=e,i=k(R,r);return(0,s.jsx)(g.z,{present:a||i.checked,children:(0,s.jsx)(m.WV.span,{"data-state":C(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});z.displayName=R;var S=i.forwardRef((e,t)=>{let{__scopeRadio:r,control:a,checked:n,bubbles:l=!0,...o}=e,d=i.useRef(null),c=(0,u.e)(d,t),f=(0,j.D)(n),x=(0,v.t)(a);return i.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(f!==n&&t){let r=new Event("click",{bubbles:l});t.call(e,n),e.dispatchEvent(r)}},[f,n,l]),(0,s.jsx)(m.WV.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:c,style:{...o.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function C(e){return e?"checked":"unchecked"}S.displayName="RadioBubbleInput";var _=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],E="RadioGroup",[P,Z]=(0,f.b)(E,[x.Pc,N]),M=(0,x.Pc)(),V=N(),[T,D]=P(E),O=i.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:n,value:i,required:l=!1,disabled:o=!1,orientation:d,dir:c,loop:u=!0,onValueChange:f,...v}=e,j=M(r),g=(0,h.gm)(c),[b,y]=(0,p.T)({prop:i,defaultProp:null!=n?n:null,onChange:f,caller:E});return(0,s.jsx)(T,{scope:r,name:a,required:l,disabled:o,value:b,onValueChange:y,children:(0,s.jsx)(x.fC,{asChild:!0,...j,orientation:d,dir:g,loop:u,children:(0,s.jsx)(m.WV.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":o?"":void 0,dir:g,...v,ref:t})})})});O.displayName=E;var A="RadioGroupItem",W=i.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:a,...n}=e,l=D(A,r),o=l.disabled||a,d=M(r),f=V(r),m=i.useRef(null),p=(0,u.e)(t,m),h=l.value===n.value,v=i.useRef(!1);return i.useEffect(()=>{let e=e=>{_.includes(e.key)&&(v.current=!0)},t=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,s.jsx)(x.ck,{asChild:!0,...d,focusable:!o,active:h,children:(0,s.jsx)(q,{disabled:o,required:l.required,checked:h,...f,...n,name:l.name,ref:p,onCheck:()=>l.onValueChange(n.value),onKeyDown:(0,c.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,c.M)(n.onFocus,()=>{var e;v.current&&(null===(e=m.current)||void 0===e||e.click())})})})});W.displayName=A;var F=i.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,n=V(r);return(0,s.jsx)(z,{...n,...a,ref:t})});F.displayName="RadioGroupIndicator";var I=r(519),L=r(4508);let X=i.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(O,{className:(0,L.cn)("grid gap-2",r),...a,ref:t})});X.displayName=O.displayName;let B=i.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(W,{ref:t,className:(0,L.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:(0,s.jsx)(F,{className:"flex items-center justify-center",children:(0,s.jsx)(I.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});B.displayName=W.displayName;var Q=r(6815);let G=i.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,L.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});G.displayName="Textarea";var Y=r(5613),U="Progress",[H,J]=(0,f.b)(U),[K,$]=H(U),ee=i.forwardRef((e,t)=>{var r,a,n,i;let{__scopeProgress:l,value:o=null,max:d,getValueLabel:c=es,...u}=e;(d||0===d)&&!ei(d)&&console.error((r="".concat(d),a="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(a,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let f=ei(d)?d:100;null===o||el(o,f)||console.error((n="".concat(o),i="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let x=el(o,f)?o:null,p=en(x)?c(x,f):void 0;return(0,s.jsx)(K,{scope:l,value:x,max:f,children:(0,s.jsx)(m.WV.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":en(x)?x:void 0,"aria-valuetext":p,role:"progressbar","data-state":ea(x,f),"data-value":null!=x?x:void 0,"data-max":f,...u,ref:t})})});ee.displayName=U;var et="ProgressIndicator",er=i.forwardRef((e,t)=>{var r;let{__scopeProgress:a,...n}=e,i=$(et,a);return(0,s.jsx)(m.WV.div,{"data-state":ea(i.value,i.max),"data-value":null!==(r=i.value)&&void 0!==r?r:void 0,"data-max":i.max,...n,ref:t})});function es(e,t){return"".concat(Math.round(e/t*100),"%")}function ea(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function en(e){return"number"==typeof e}function ei(e){return en(e)&&!isNaN(e)&&e>0}function el(e,t){return en(e)&&!isNaN(e)&&e<=t&&e>=0}er.displayName=et;let eo=i.forwardRef((e,t)=>{let{className:r,value:a,...n}=e;return(0,s.jsx)(ee,{ref:t,className:(0,L.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,s.jsx)(er,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});eo.displayName=ee.displayName;var ed=r(9763);let ec=(0,ed.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var eu=r(1723);let ef=(0,ed.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function em(){let{data:e,status:t}=(0,a.useSession)(),r=(0,n.useRouter)(),c=(0,n.useParams)().id,[u,f]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0),[p,h]=(0,i.useState)({}),[v,j]=(0,i.useState)(0),[g,b]=(0,i.useState)(0),[y,N]=(0,i.useState)(!1),[w,k]=(0,i.useState)(""),[q,R]=(0,i.useState)(!1),[z,S]=(0,i.useState)(null);(0,i.useEffect)(()=>{if("loading"!==t){if(!e||"student"!==e.user.role){r.push("/login");return}C()}},[e,t,r,c]),(0,i.useEffect)(()=>{if(g>0){let e=setTimeout(()=>{b(g-1)},1e3);return()=>clearTimeout(e)}0===g&&u&&u.time_limit>0&&E()},[g,u]);let C=async()=>{try{let e=await fetch("/api/student/quiz/".concat(c,"/start"),{method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent}});if(!e.ok){let t=await e.json();k(t.error||"Failed to start quiz");return}let t=await e.json();f(t.quiz),S(t.attemptId),R(t.sebVerified),t.quiz.time_limit>0&&b(60*t.quiz.time_limit)}catch(e){k("Failed to load quiz")}finally{x(!1)}},_=(e,t)=>{h(r=>({...r,[e]:t}))},E=async()=>{if(!y){N(!0);try{let e=await fetch("/api/student/quiz/".concat(c,"/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attemptId:z,answers:p})});if(e.ok)r.push("/student/quiz/".concat(c,"/results"));else{let t=await e.json();k(t.error||"Failed to submit quiz")}}catch(e){k("Failed to submit quiz")}finally{N(!1)}}},P=()=>u?Object.keys(p).length/u.questions.length*100:0;if("loading"===t||m)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading quiz..."})]})});if(!e||"student"!==e.user.role)return null;if(w)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.W,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(Y.bZ,{variant:"destructive",children:[(0,s.jsx)(ec,{className:"h-4 w-4"}),(0,s.jsx)(Y.X,{children:w})]})})]});if(!u)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.W,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)(Y.bZ,{children:(0,s.jsx)(Y.X,{children:"Quiz not found"})})})]});if(u.seb_required&&!q)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.W,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(Y.bZ,{variant:"destructive",children:[(0,s.jsx)(ec,{className:"h-4 w-4"}),(0,s.jsx)(Y.X,{children:"This quiz requires Safe Exam Browser (SEB). Please open this quiz using SEB with the proper configuration file."})]})})]});let Z=u.questions[v];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.W,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)(d.Zb,{className:"mb-6",children:(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.ll,{children:u.title}),(0,s.jsx)(d.SZ,{children:u.description})]}),(0,s.jsxs)("div",{className:"text-right",children:[u.time_limit>0&&(0,s.jsxs)("div",{className:"flex items-center text-lg font-semibold",children:[(0,s.jsx)(eu.Z,{className:"h-5 w-5 mr-2"}),"".concat(Math.floor(g/60),":").concat((g%60).toString().padStart(2,"0"))]}),u.seb_required&&q&&(0,s.jsxs)("div",{className:"flex items-center text-green-600 text-sm mt-1",children:[(0,s.jsx)(ef,{className:"h-4 w-4 mr-1"}),"SEB Verified"]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,s.jsxs)("span",{children:["Progress: ",Object.keys(p).length," of ",u.questions.length," answered"]}),(0,s.jsxs)("span",{children:[Math.round(P()),"% complete"]})]}),(0,s.jsx)(eo,{value:P(),className:"w-full"})]})]})}),(0,s.jsx)(d.Zb,{className:"mb-6",children:(0,s.jsx)(d.aY,{className:"pt-6",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:u.questions.map((e,t)=>(0,s.jsx)(o.z,{variant:v===t?"default":p[u.questions[t].id]?"outline":"ghost",size:"sm",onClick:()=>j(t),className:p[u.questions[t].id]?"border-green-500":"",children:t+1},t))})})}),(0,s.jsxs)(d.Zb,{className:"mb-6",children:[(0,s.jsx)(d.Ol,{children:(0,s.jsxs)(d.ll,{children:["Question ",v+1," of ",u.questions.length,(0,s.jsxs)("span",{className:"text-sm font-normal text-gray-600 ml-2",children:["(",Z.points," ",1===Z.points?"point":"points",")"]})]})}),(0,s.jsxs)(d.aY,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("p",{className:"text-lg mb-4",children:Z.question_text}),"multiple_choice"===Z.question_type&&Z.options&&(0,s.jsx)(X,{value:p[Z.id]||"",onValueChange:e=>_(Z.id,e),children:Z.options.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(B,{value:e.id.toString(),id:"option-".concat(e.id)}),(0,s.jsx)(Q._,{htmlFor:"option-".concat(e.id),className:"flex-1 cursor-pointer",children:e.option_text})]},e.id))}),"true_false"===Z.question_type&&(0,s.jsxs)(X,{value:p[Z.id]||"",onValueChange:e=>_(Z.id,e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(B,{value:"true",id:"true"}),(0,s.jsx)(Q._,{htmlFor:"true",className:"cursor-pointer",children:"True"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(B,{value:"false",id:"false"}),(0,s.jsx)(Q._,{htmlFor:"false",className:"cursor-pointer",children:"False"})]})]}),"short_answer"===Z.question_type&&(0,s.jsx)(G,{placeholder:"Enter your answer here...",value:p[Z.id]||"",onChange:e=>_(Z.id,e.target.value),rows:4})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(o.z,{variant:"outline",onClick:()=>j(Math.max(0,v-1)),disabled:0===v,children:"Previous"}),v<u.questions.length-1?(0,s.jsx)(o.z,{onClick:()=>j(v+1),children:"Next"}):(0,s.jsx)(o.z,{onClick:E,disabled:y,className:"bg-green-600 hover:bg-green-700",children:y?"Submitting...":"Submit Quiz"})]})]})]}),(0,s.jsx)(d.Zb,{children:(0,s.jsx)(d.aY,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(o.z,{onClick:E,disabled:y,size:"lg",className:"bg-green-600 hover:bg-green-700",children:y?"Submitting Quiz...":"Submit Quiz"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Make sure to review all your answers before submitting"})]})})})]})})]})}},5613:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return o}});var s=r(7437),a=r(2265),n=r(535),i=r(4508);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),r),...n})});o.displayName="Alert",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})}).displayName="AlertTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...a})});d.displayName="AlertDescription"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var s=r(7437),a=r(2265),n=r(6394),i=r(535),l=r(4508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),r),...a})});d.displayName=n.f.displayName},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var s=r(2265),a=r(6840),n=r(7437),i=s.forwardRef((e,t)=>(0,n.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var s=r(2265);function a(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[605,791,677,519,971,117,744],function(){return e(e.s=8782)}),_N_E=e.O()}]);